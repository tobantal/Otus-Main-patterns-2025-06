# Docker - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É


**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –°–æ–±–∏—Ä–∞–µ—Ç—Å—è –æ–±—Ä–∞–∑ —Å –ø—Ä–æ–µ–∫—Ç–æ–º (–∑–∞–Ω–∏–º–∞–µ—Ç 2-5 –º–∏–Ω—É—Ç –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ)
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `redirect-service`
- –°–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:8080`

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
curl http://localhost:8080/r/promo
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
HTTP/1.1 302 Found
Location: https://example.com/promo
```

### 3. –û—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# Ctrl+C –∏–ª–∏ –≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
docker-compose down
```

---

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ (detached mode)

```bash
docker-compose up -d
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
docker-compose logs -f redirect-service
```

### –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–¥–∞

```bash
docker-compose up --build
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```bash
docker-compose down
```

### –ó–∞–π—Ç–∏ –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
docker exec -it redirect-service /bin/bash
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è



### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤ `docker-compose.yml`:
```yaml
environment:
  - SERVER_HOST=0.0.0.0
  - SERVER_PORT=8080
```

---

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω

```bash
docker ps
```

–î–æ–ª–∂–µ–Ω –±—ã—Ç—å `redirect-service` –≤ —Å—Ç–∞—Ç—É—Å–µ `Up`.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –ø—Ä–∏ –æ—à–∏–±–∫–µ

```bash
docker-compose logs redirect-service
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–∏

```bash
docker network ls
docker network inspect microservices-network
```

---

## üìä –†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞

**Build stage:** ~2GB (gcc:13 + –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)  
**Runtime stage:** ~100MB (ubuntu:24.04 + –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª)

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è multistage build
- –í runtime —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- –û—á–∏—Å—Ç–∫–∞ apt cache

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

```bash
docker-compose up --build
```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤ config.json

```bash
docker-compose restart redirect-service
```

---

## üåê –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ redirect
curl -v http://localhost:8080/r/promo

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—Ä—É–≥–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞
curl -v http://localhost:8080/r/docs

# –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø—Ä–∞–≤–∏–ª–æ (404)
curl -v http://localhost:8080/r/unknown
```

---

## üöß –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **Boost —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–π —Å–±–æ—Ä–∫–µ** - –º–æ–∂–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ Docker layer caching
2. **–°–±–æ—Ä–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Ä–µ–º—è** - –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
3. **–ü–æ—Ä—Ç 8080 –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–≤–æ–±–æ–¥–µ–Ω** - –ø—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–Ω–∏–º–∞–µ—Ç –ø–æ—Ä—Ç

---