#pragma once

#include <any>
#include <string>
#include <stdexcept>

/**
 * @file IGameObject.hpp
 * @brief Интерфейс универсального игрового объекта
 * @author Anton Tobolkin
 * @version 1.0
 */

/**
 * @brief Интерфейс для управления свойствами игровых объектов
 *
 * Интерфейс класса задает контракт для всех игровых объектов,
 * реализующих паттерн "Универсальный объект". Это позволяет хранить
 * и манипулировать объектами с произвольным набором свойств без
 * необходимости создавать отдельные классы для каждого типа объекта.
 *
 * Использование std::any обеспечивает полиморфизм для хранения
 * свойств различных типов данных.
 */
class IGameObject {
public:
    /**
     * @brief Виртуальный деструктор интерфейса
     *
     * Обеспечивает правильное удаление объектов-наследников
     * при удалении через указатель на интерфейс.
     */
    virtual ~IGameObject() = default;

    /**
     * @brief Получить значение свойства игрового объекта
     *
     * Возвращает значение свойства, связанного с указанным ключом.
     * Если свойство не найдено, выбрасывается исключение.
     *
     * @param key Ключ (название) запрашиваемого свойства
     * @return std::any Значение свойства (может быть любого типа)
     * @throws std::runtime_error Если свойство не найдено или недоступно
     *
     * @example
     * @code
     * int health = std::any_cast<int>(obj->getProperty("health"));
     * @endcode
     */
    virtual std::any getProperty(const std::string& key) const = 0;

    /**
     * @brief Установить значение свойства игрового объекта
     *
     * Устанавливает или обновляет значение свойства с указанным ключом.
     * Если свойство не существует, оно создается. Тип значения может быть
     * произвольным благодаря использованию std::any.
     *
     * @param key Ключ (название) устанавливаемого свойства
     * @param value Новое значение свойства (может быть любого типа)
     * @throws std::runtime_error Если свойство защищено от записи или
     *         операция не поддерживается реализацией
     *
     * @example
     * @code
     * obj->setProperty("health", 100);
     * obj->setProperty("name", std::string("Player"));
     * obj->setProperty("position", 3.14f);
     * @endcode
     */
    virtual void setProperty(const std::string& key, const std::any& value) = 0;
};