# Отчет по реализации задания hw-08 “Message Exchange”

## 1. Выполненные требования

**Формат сообщения и SOLID**

- Интерфейс `ICommand` вынесен в общий модуль и используется через IoC-контейнер, что обеспечивает «Dependency Inversion» и модульность.
- `InterpretCommand` реализован в соответствии с SRP и OCP: метод `execute()` отвечает только за обработку входящего сообщения, а расширяемость достигается регистрацией новых команд через контейнер.

**Endpoint `/game/command`**

- Реализован HTTP POST на основе легковесного хедерного сервера cpp-httplib.
- Разбор JSON, проверка наличия полей `gameId` и `operationId`, возвращает 200 при успехе и 400 при ошибке (пропущенные поля или неверный JSON).

**Thread-safe менеджер игр**

- `GameManager` создаёт и кэширует очереди команд (`ThreadSafeQueue`) под каждую игру, использует `std::mutex` для защиты данных.

**Интеграционные тесты**

- Написаны тесты на GoogleTest для трёх сценариев:
    - **ValidCommand**: корректный JSON → 200, `{"status":"accepted"}`
    - **MissingFields**: отсутствует поле → 400, `{"error":"invalid_message"}`
    - **InvalidJson**: невалидный JSON → 400, `{"error":"invalid_message"}`


## 2. CI и сборка

- **CI настроен** на корневом уровне проекта для автоматической сборки и тестирования всех подпроектов: `common`, `hw-05-ioc`, `hw-07-multithreading`, `hw-08-message-exchange`.


## 3. Используемые внешние компоненты

- **httplib.h**
Скопирован из проекта cpp-httplib by yhirose для реализации HTTP-сервера.


## 4. Итоговая оценка по критериям

| Критерий | Баллы | Результат |
| :-- | :--: | :-- |
| Задача сдана на проверку | 1 | выполнено |
| Код компилируется без ошибок, тесты проходят | 1 | выполнено |
| Настроен CI для автоматической проверки | 2 | выполнено |
| Формат сообщения описан — базовое описание | 1 | выполнено |
| Формат сообщения — удовлетворяет SOLID | 2 | выполнено |
| Реализован endpoint — базовая реализация | 1 | выполнено |
| Endpoint без race conditions | 2 | выполнено (используются mutex в GameManager) |
| InterpretCommand — базовая реализация | 1 | выполнено |
| InterpretCommand — удовлетворяет SOLID | 2 | выполнено |
| **Итого** | **10** | **10/10** |
